!function t(e,n,o){function i(s,c){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!c&&u)return u(s,!0);if(r)return r(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var a=n[s]={exports:{}};e[s][0].call(a.exports,function(t){var n=e[s][1][t];return i(n?n:t)},a,a.exports,t,e,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(t,e,n){"use strict";var o=t("./components/Rectangle");n.Rectangle=o.Rectangle;var i=t("./components/Label");n.Label=i.Label;var r=t("./components/Button");n.Button=r.Button},{"./components/Button":2,"./components/Label":3,"./components/Rectangle":4}],2:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("./Label"),r=function(t){function e(e){t.call(this,e),this.foreColor="#fff",this.backgroundColor="#000",this.padding.top=5,this.padding.bottom=5,this.padding.left=5,this.padding.right=5,this.height="auto",this.width="auto"}return o(e,t),e.prototype._getTextPosition=function(){0|this.context.measureText(this.text).width;return{y:this.position.y+this.font.height+this.padding.top,x:this.position.x+this.padding.left}},e.prototype.getAbsoluteHeight=function(){return"auto"===this.height?this.font.height+this.padding.top+this.padding.bottom:this.height+this.padding.top+this.padding.bottom},e.prototype.getAbsoluteWidth=function(){if("auto"===this.width){var t=0|this.context.measureText(this.text).width;return t+this.padding.left+this.padding.right}return this.height+this.padding.left+this.padding.right},e.prototype._render=function(){{var t=this._getTextPosition();this.padding.top+this.padding.bottom}this.context.font=this.font.toString(),this.context.textAlign=this.textAlign,this.context.fillStyle=this.backgroundColor,this.context.fillRect(this.position.x,this.position.y,this.getAbsoluteWidth(),this.getAbsoluteHeight()),this.context.fillStyle=this.foreColor,this.context.fillText(this.text,t.x,t.y,this.context.measureText(this.text).width)},e}(i.Label);n.Button=r},{"./Label":3}],3:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("../ui"),r=t("../events"),s=function(t){function e(){t.apply(this,arguments),this._text="New Label",this._align=i.TextAlign.left}return o(e,t),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){var e=this._text.toString();this._text=t,this._emit("propertyChange",new r.PropertyChangedEvent(this,"text",e,t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textAlign",{get:function(){return this._align},set:function(t){this._align=t,this._emit("propertyChange",new r.PropertyChangedEvent(this,"textAlign",null,t))},enumerable:!0,configurable:!0}),e.prototype._render=function(){this.context.textAlign=this.textAlign,this.context.font=this.font.toString(),this.context.fillText(this.text,this.position.y,this.position.x)},e}(i.UIComponent);n.Label=s},{"../events":16,"../ui":23}],4:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("../ui"),r=function(t){function e(){t.apply(this,arguments)}return o(e,t),e.prototype._render=function(){this.context.fillStyle=this.backgroundColor,this.context.fillRect(this.position.x,this.position.y,this.width,this.height)},e}(i.UIComponent);n.Rectangle=r},{"../ui":23}],5:[function(t){"use strict";var e=t("../ui"),n=t("../components"),o=new e.Form(document.getElementById("app"),function(){this.height=Math.max(document.documentElement.clientHeight,window.innerHeight||0),this.width=Math.max(document.documentElement.clientWidth,window.innerWidth||0),console.log("call bootstrap",this)});o.on("click",function(){console.log("canvas form click!")});var i=new n.Rectangle(o);i.height=32,i.width=32,i.left=0,i.top=0,i.backgroundColor="red",o.controls.add(i),i.on("click",function(){alert("rect click")});var r=new n.Button(o);r.left=128,r.top=128,r.text="Click on me!",r.font.size=12,r.foreColor="#fff",r.on("click",function(){r.top=10,r.backgroundColor="#ff3232",r.foreColor="#000"}),r.on("mousemove",function(){r.backgroundColor="#cecece",r.foreColor="#000"}),o.controls.add(r);var s=new n.Label(o);s.left=0,s.top=128,s.text="Hello world!",s.foreColor="#ff00aa",s.font.size=18,o.controls.add(s)},{"../components":1,"../ui":23}],6:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("./events/PropertyChangedEvent"),r=t("./EventEmitter"),s=function(t){function e(){t.call(this),this.emittable=!1}return o(e,t),e.prototype._onChange=function(t){this.emittable&&this._emit("propertyChange",new i.PropertyChangedEvent(this,t,null,null))},e}(r.EventEmitter);n.Emittable=s},{"./EventEmitter":8,"./events/PropertyChangedEvent":12}],7:[function(t,e,n){"use strict";var o=function(){function t(t,e){this._args=e,this._target=t}return Object.defineProperty(t.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"args",{get:function(){return this._args},set:function(t){this._args=t},enumerable:!0,configurable:!0}),t}();n.Event=o},{}],8:[function(t,e,n){"use strict";var o=t("./EventGenerator"),i=function(){function t(){this.__e=new o.EventGenerator(this)}return t.prototype.on=function(){},t.prototype.off=function(){},t.prototype._emit=function(){},t}();n.EventEmitter=i},{"./EventGenerator":9}],9:[function(t,e,n){"use strict";var o=t("./EventListenersCollection"),i=function(){function t(t,e){void 0===e&&(e=!0),this._listeners={},this._owner=t,e&&this.inject()}return t.prototype.hasListeners=function(t){return"undefined"!=typeof this._listeners[t]},t.prototype.inject=function(){var t=this;this._owner.on=function(){t.on.apply(t,arguments)},this._owner.off=function(){t.off.apply(t,arguments)},this._owner._emit=function(){t.emit.apply(t,arguments)}},t.prototype.emit=function(t,e){this.hasListeners(t)&&this._listeners[t].triggerEvent(e)},t.prototype.addEventListener=function(t,e){return this.hasListeners(t)||(this._listeners[t]=new o.EventListenersCollection(this._owner,t)),this._listeners[t].addEventListener(e),this._owner},t.prototype.removeEventListener=function(t,e){return this.hasListeners(t)?this._listeners[t].removeEventListener(e):!1},t.prototype.on=function(t,e){var n=this;t.trim().split(" ").forEach(function(t){n.addEventListener(t,e)})},t.prototype.off=function(t,e){var n=this;t.trim().split(" ").forEach(function(t){n.removeEventListener(t,e)})},t}();n.EventGenerator=i},{"./EventListenersCollection":10}],10:[function(t,e,n){"use strict";var o=function(){function t(t,e){this._hooks=[],this.eventName=e,this._eventSource=t}return t.prototype.triggerEvent=function(t){var e=this;this._hooks.forEach(function(n){"function"==typeof n&&n.call(e._eventSource,t)})},t.prototype.getListenersCount=function(){return this._hooks.length},t.prototype.addEventListener=function(t){this._hooks.push(t)},t.prototype.removeEventListener=function(t){var e=this._hooks.indexOf(t);return e>-1&&this._hooks.splice(e,1),e>-1},t}();n.EventListenersCollection=o},{}],11:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("../Event"),r=function(t){function e(e,n){t.call(this,e,{item:n})}return o(e,t),e}(i.Event);n.CollectionEvent=r},{"../Event":7}],12:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("./UIEvent"),r=function(t){function e(e,n,o,i){t.call(this,e,{propertyName:n,oldValue:o,newValue:i})}return o(e,t),e}(i.UIEvent);n.PropertyChangedEvent=r},{"./UIEvent":14}],13:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("./UIEvent"),r=function(t){function e(e,n){t.call(this,e,n)}return o(e,t),e}(i.UIEvent);n.UICommonEvent=r},{"./UIEvent":14}],14:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("../Event"),r=function(t){function e(e,n){t.call(this,e,n)}return o(e,t),e}(i.Event);n.UIEvent=r},{"../Event":7}],15:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("./UIEvent"),r=function(t){function e(e,n){t.call(this,e,{type:n.type,target:e,keys:{ctrl:n.ctrlKey,alt:n.altKey,shift:n.shiftKey,meta:n.metaKey},position:{x:n.layerX,y:n.layerY}})}return o(e,t),e}(i.UIEvent);n.UIMouseEvent=r},{"./UIEvent":14}],16:[function(t,e,n){"use strict";var o=t("./event/Emittable");n.Emittable=o.Emittable;var i=t("./event/Event");n.Event=i.Event;var r=t("./event/EventEmitter");n.EventEmitter=r.EventEmitter;var s=t("./event/EventGenerator");n.EventGenerator=s.EventGenerator;var c=t("./event/EventListenersCollection");n.EventListenersCollection=c.EventListenersCollection;var u=t("./event/events/CollectionEvent");n.CollectionEvent=u.CollectionEvent;var h=t("./event/events/PropertyChangedEvent");n.PropertyChangedEvent=h.PropertyChangedEvent;var a=t("./event/events/UIEvent");n.UIEvent=a.UIEvent;var p=t("./event/events/UICommonEvent");n.UICommonEvent=p.UICommonEvent;var l=t("./event/events/UIMouseEvent");n.UIMouseEvent=l.UIMouseEvent},{"./event/Emittable":6,"./event/Event":7,"./event/EventEmitter":8,"./event/EventGenerator":9,"./event/EventListenersCollection":10,"./event/events/CollectionEvent":11,"./event/events/PropertyChangedEvent":12,"./event/events/UICommonEvent":13,"./event/events/UIEvent":14,"./event/events/UIMouseEvent":15}],17:[function(t,e,n){"use strict";var o=t("./helpers/classes/Version");n.Version=o.Version;var i=t("./helpers/classes/Domain");n.Domain=i.Domain;var r=t("./helpers/isset");n.isset=r.isset;var s=t("./helpers/$defined");n.$defined=s.$defined;var c=t("./helpers/$async");n.$async=c.$async},{"./helpers/$async":18,"./helpers/$defined":19,"./helpers/classes/Domain":20,"./helpers/classes/Version":21,"./helpers/isset":22}],18:[function(t,e,n){"use strict";function o(t,e){void 0===e&&(e=console.error);var n=new i.Domain;n.on("error",e),n.run(t)}var i=t("./classes/Domain");n.$async=o},{"./classes/Domain":20}],19:[function(t,e,n){"use strict";function o(t){return"undefined"!=typeof t}n.$defined=o},{}],20:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("../../events"),r=function(t){function e(){t.call(this)}return o(e,t),e.prototype._execute=function(t){try{t()}catch(e){this._emit("error",e)}},e.prototype.run=function(t){var e=this;setTimeout(function(){e._execute(t)},0)},e}(i.EventEmitter);n.Domain=r},{"../../events":16}],21:[function(t,e,n){"use strict";var o=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.major=t,this.minor=e,this.patch=n}return t.prototype.toString=function(){return[this.major,this.minor,this.patch].join(".")},t}();n.Version=o},{}],22:[function(t,e,n){"use strict";function o(t){return"undefined"!=typeof t}n.isset=o},{}],23:[function(t,e,n){"use strict";var o=t("./ui/types/Point");n.Point=o.Point;var i=t("./ui/types/BoxModelElement");n.BoxModelElement=i.BoxModelElement;var r=t("./ui/types/GUID");n.GUID=r.GUID;var s=t("./ui/types/TextAlign");n.TextAlign=s.TextAlign;var c=t("./ui/types/Font");n.Font=c.Font;var u=t("./ui/types/FontStyle");n.FontStyle=u.FontStyle;var h=t("./ui/types/Collection");n.Collection=h.Collection;var a=t("./ui/ComponentMapper");n.ComponentMapper=a.ComponentMapper;var p=t("./ui/UIComponent");n.UIComponent=p.UIComponent;var l=t("./ui/Form");n.Form=l.Form},{"./ui/ComponentMapper":24,"./ui/Form":25,"./ui/UIComponent":26,"./ui/types/BoxModelElement":28,"./ui/types/Collection":30,"./ui/types/Font":31,"./ui/types/FontStyle":32,"./ui/types/GUID":33,"./ui/types/Point":34,"./ui/types/TextAlign":35}],24:[function(t,e,n){"use strict";var o=t("./broadcasters/CanvasMouseEventBroadcaster"),i=function(){function t(e){this._guidMap={},this.broadcasters=[],this.owner=e,this.broadcasters.push(new o.CanvasMouseEventBroadcaster(e,t.DOMMouseEvents,!0))}return Object.defineProperty(t.prototype,"currentMouseElement",{get:function(){return this._currentMouseElement},set:function(t){this._currentMouseElement=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentFocusedElement",{get:function(){return this._currentFocusedElement},set:function(t){this._currentFocusedElement=t},enumerable:!0,configurable:!0}),t.prototype._registerId=function(t){this._guidMap[t.id.toString()]=t},t.prototype.getElementById=function(t){return this._guidMap[t]},t.prototype.register=function(t){this._registerId(t)},t.DOMMouseEvents=["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove"],t.DOMEvents=["keydown","keyup","keypress"],t}();n.ComponentMapper=i},{"./broadcasters/CanvasMouseEventBroadcaster":27}],25:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("../events"),r=t("../helpers"),s=t("./ComponentMapper"),c=t("./types/Collection"),u=function(t){function e(e,n){t.call(this),this.version=new r.Version(0,4,0);var o=this;this.element=e,this.canvas=document.createElement("canvas"),this.canvas.tabIndex=0,this.canvas.focus(),Object.defineProperty(this.canvas,"form",{value:o,enumerable:!0,configurable:!0}),n&&n.call(o,e),this.element.appendChild(this.canvas),this.controls=new c.Collection(null,this),this.controls.on("elementInserted",function(){}),this._emit("drawStart",new i.UIEvent(this,{})),this._map=new s.ComponentMapper(this),this.on("redraw",function(){this.clear(),this.controls.forEach(function(t){t.redraw()})})}return o(e,t),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.canvas.getContext("2d")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mapper",{get:function(){return this._map},enumerable:!0,configurable:!0}),e.prototype.redrawContext=function(t){this._emit("redraw",new i.UIEvent(this,{force:t}))},e.prototype.registerElement=function(t){this.mapper.register(t)},e.prototype.getElementById=function(t){return this._map.getElementById(t)},e.prototype.clear=function(){return this.context.clearRect(0,0,this.width,this.height),this},e}(i.EventEmitter);n.Form=u},{"../events":16,"../helpers":17,"./ComponentMapper":24,"./types/Collection":30}],26:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("../events"),r=t("../helpers"),s=t("./types/BoxModelElement"),c=t("./types/Collection"),u=t("./types/GUID"),h=t("./types/Point"),a=t("./types/Font"),p=function(t){function e(e){function n(){o._onUpdate()}t.call(this),this._height=128,this._width=128,this._injected=!1,this._backgroundColor="rgba(0,0,0,0)",this._foreColor="#000",this._padding=new s.BoxModelElement,this._margin=new s.BoxModelElement,this._font=new a.Font,this._drawn=!1;var o=this;this.owner=e,this._context=e.context,this.__position__=new h.Point(0,0),this.controls=new c.Collection(this,e);var i="propertyChange";this.on("layerUpdate",this._onUpdate),this.on("propertyChange",this._onUpdate),this._font.on(i,n),this._padding.on(i,n),this._margin.on(i,n)}return o(e,t),e.prototype.emit=function(t,e){void 0===t&&(t="emit"),this._emit(t,e),this.hasParent()&&this.parent.emit(t,e)},e.prototype.broadcast=function(t,e,n){void 0===t&&(t="broadcast"),void 0===n&&(n=!0),n&&this._emit(t,e),this.controls.forEach(function(n){n.broadcast(t,e)})},e.prototype.react=function(t,e){this.broadcast("mouseover",e,!1),this.emit("mouseover",e)},Object.defineProperty(e.prototype,"drawn",{get:function(){return this._drawn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this._padding},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"margin",{get:function(){return this._margin},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){return this._font},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.hasId()||(this._GUID=new u.GUID),this._GUID},enumerable:!0,configurable:!0}),e.prototype.hasId=function(){return"undefined"!=typeof this._GUID},Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInjected",{get:function(){return this._injected},enumerable:!0,configurable:!0}),e.prototype._onUpdate=function(){this.drawn&&this.owner._emit("redraw",{relatedTarget:this})},e.prototype.inBoundsOf=function(t){var e=this.points();return t.x>=e[0].x&&t.x<=e[1].x&&t.y>=e[0].y&&t.y<=e[2].y},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e=this._backgroundColor.toString();this._backgroundColor=t,this._emit("propertyChange",new i.PropertyChangedEvent(this,"backgroundColor",e,t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"foreColor",{get:function(){return this._foreColor},set:function(t){var e=this._foreColor.toString();this._foreColor=t,this._emit("propertyChange",new i.PropertyChangedEvent(this,"foreColor",e,t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._emit("propertyChange",new i.PropertyChangedEvent(this,"width",null,t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._emit("propertyChange",new i.PropertyChangedEvent(this,"width",null,t))},enumerable:!0,configurable:!0}),e.prototype.getAbsoluteHeight=function(){return this.height},e.prototype.getAbsoluteWidth=function(){return this.height},Object.defineProperty(e.prototype,"top",{get:function(){return this.__position__.y},set:function(t){var e=t+0;this.__position__.y=t,this._emit("propertyChange",new i.PropertyChangedEvent(this,"top",e,t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.__position__.x},set:function(t){var e=t+0;this.__position__.x=t,this._emit("propertyChange",new i.PropertyChangedEvent(this,"left",e,t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.__position__},set:function(t){var e=new h.Point(t.x,t.y);this.top=t.y,this.left=t.x,this.__position__=t,this._emit("propertyChange",new i.PropertyChangedEvent(this,"position",e,t))},enumerable:!0,configurable:!0}),e.prototype.points=function(){var t=new h.Point(this.position.x,this.position.y),e=new h.Point(this.position.x+this.getAbsoluteWidth(),this.position.y),n=new h.Point(this.position.x+this.getAbsoluteWidth(),this.position.y+this.getAbsoluteHeight()),o=new h.Point(this.position.x,this.position.y+this.getAbsoluteHeight());return[t,e,n,o]},Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),e.prototype.hasParent=function(){return r.isset(this.parent)&&null!==this.parent},e.prototype.redraw=function(){return this.isInjected?(this.owner.registerElement(this),this._emit("redraw",new i.UIEvent(this,{force:!1})),this.render(),!0):!1},e.prototype._render=function(){},e.prototype._drawChildren=function(){this.controls.forEach(function(t){t.redraw()})},e.prototype.render=function(){this._drawn=!1,this._emit("render",new i.UIEvent(this,null)),this._render(),this._drawChildren(),this._drawn=!0,this._emit("rendered",new i.UIEvent(this,null))},e.prototype.__inject=function(t){this._parent=t,this._injected=!0,this._font.emittable=!0,this.owner.registerElement(this),this._emit("inject",new i.UIEvent(this,{parent:t})),this.render()},e.prototype.remove=function(){var t=this.hasParent()?this.parent:this.owner;t.controls.remove(this)},e.prototype.dispose=function(){this._emit("dispose",new i.UIEvent(this,null)),this._injected=!1},e}(i.EventEmitter);n.UIComponent=p},{"../events":16,"../helpers":17,"./types/BoxModelElement":28,"./types/Collection":30,"./types/Font":31,"./types/GUID":33,"./types/Point":34}],27:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("../types/Point"),r=t("../../events"),s=t("../../helpers"),c=t("../types/CanvasEventBroadcaster"),u=function(t){function e(e,n,o){void 0===n&&(n=[]),void 0===o&&(o=!1),t.call(this,e,n),this.elementFound=!1,this.eventReactors={click:function(t,e){var n=this.mapper.currentMouseElement;if(null===n||n.id===t.id){this.mapper.currentMouseElement=t;var o=new r.UIMouseEvent(t,e);t.react(e.type,o)}else{n.broadcast("blur",new r.UIMouseEvent(t,e)),this.mapper.currentMouseElement=t;var o=new r.UIMouseEvent(t,e);t.react(e.type,o)}},mousemove:function(t,e){var n=this.mapper.currentMouseElement;if(null===n||n.id===t.id){if(n.id===t.id)return;this.mapper.currentMouseElement=t;var o=new r.UIMouseEvent(t,e);t.emit("mouseover",o)}else{var o=new r.UIMouseEvent(n,e);n.emit("mouseout",o),this.mapper.currentMouseElement=t;var o=new r.UIMouseEvent(t,e);t.emit("mouseover",o)}},dblclick:function(t,e){this.click(t,e)},mousedown:function(t,e){this.click(t,e)},mouseup:function(t,e){this.click(t,e)},mouseout:function(){this.mapper.currentMouseElement=null}}}return o(e,t),e.prototype.targetEvent=function(t,e){var n=this,o=new i.Point(e.layerX,e.layerY);return t.inBoundsOf(o)?this.react(t,e):(t.controls.forEach(function(t){n.targetEvent(t,e)}),void 0)},e.prototype.react=function(t,e){var n=s.$defined(this.eventReactors[e.type])?this.eventReactors[e.type]:"mousemove";n(t,e)},e.prototype.bindEvent=function(t){var e=this,n=this.owner;n._emit(t.type,new r.UIMouseEvent(n,t)),s.$async(function(){n.controls.forEach(function(n){e.targetEvent(n,t)}),e.elementFound||(e.mapper.currentMouseElement=null)})},e}(c.CanvasEventBroadcaster);n.CanvasMouseEventBroadcaster=u},{"../../events":16,"../../helpers":17,"../types/CanvasEventBroadcaster":29,"../types/Point":34}],28:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("../../events"),r=function(t){function e(e,n,o,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=0),t.call(this),this._top=e,this._left=i,this._right=n,this._bottom=o}return o(e,t),Object.defineProperty(e.prototype,"top",{get:function(){return this._top},set:function(t){this._top=t,this._onChange("top")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t,this._onChange("right")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._bottom},set:function(t){this._bottom=t,this._onChange("bottom")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this._left},set:function(t){this._left=t,this._onChange("left")},enumerable:!0,configurable:!0}),e}(i.Emittable);n.BoxModelElement=r},{"../../events":16}],29:[function(t,e,n){"use strict";var o=function(){function t(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1),this._loaded=!1,this.owner=t,this.events=e,this.mapper=t.mapper,n&&this.load()}return t.prototype.bindEvent=function(){},t.prototype.react=function(){},t.prototype.targetEvent=function(){},Object.defineProperty(t.prototype,"loaded",{get:function(){return this._loaded},enumerable:!0,configurable:!0}),t.prototype.load=function(){var t=this;this.loaded||(this.events.forEach(function(e){t.owner.canvas.addEventListener(e,function(e){t.bindEvent(e)})}),this._loaded=!0)},t}();n.CanvasEventBroadcaster=o},{}],30:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("../../events"),r=t("../../events"),s=t("./Point"),c=function(t){function e(e,n){t.call(this),this.collectionHandler=e,this.items=[],this._defaultForm=n}return o(e,t),e.prototype.add=function(t){t.__inject(this.collectionHandler),this.items.push(t),this._emit("elementInserted",new r.CollectionEvent(this,t))},e.prototype.remove=function(t){var e=this.items.indexOf(t);e>-1&&(this.items[e].dispose(),this._emit("elementRemove",new r.CollectionEvent(this,this.items[e])),this.items.splice(e,1))},e.prototype.forEach=function(t){this.items.forEach.call(this.items,t)},e.prototype.broadcast=function(t,e,n,o){void 0===n&&(n=!0),void 0===o&&(o=new s.Point(0,0)),this.forEach(function(i){var r=n?i.inBoundsOf(o):!0;r&&i._emit(t.type,e(t.type,i));var s=n;r&&(s=!1),i.controls.broadcast(t,e,s,o)})},e}(i.EventEmitter);n.Collection=c},{"../../events":16,"./Point":34}],31:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("../../helpers"),r=t("./FontStyle"),s=t("../../events"),c=function(t){function e(e,n,o){void 0===e&&(e="sans-serif"),void 0===n&&(n=10),void 0===o&&(o=400),t.call(this),this.emittable=!1,this._family=e,this._size=n,this._weight=o,this._style=r.FontStyle.normal}return o(e,t),e.prototype._onChange=function(t){this.emittable&&this._emit("propertyChange",new s.PropertyChangedEvent(this,t,null,null))},Object.defineProperty(e.prototype,"height",{get:function(){return i.isset(this._height)&&"undefined"!=typeof this._height?this._height:1.2*this._size|0},set:function(t){this._height=t,this._onChange("height")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weight",{get:function(){return this._weight},set:function(t){this._weight=t,this._onChange("weight")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){this._style=t,this._onChange("style")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"family",{get:function(){return this._family},set:function(t){this._family=t,this._onChange("family")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(t){this._size=t,this._onChange("size")},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return[this.style.toString(),this.weight,this.size+"px/"+this.height+"px",this.family].join(" ")},e}(s.EventEmitter);n.Font=c},{"../../events":16,"../../helpers":17,"./FontStyle":32}],32:[function(t,e,n){"use strict";var o=function(){function t(t){this._styleType=t}return t.prototype.toString=function(){return this._styleType.toString()},t.normal=new t("normal"),t.italic=new t("italic"),t}();n.FontStyle=o},{}],33:[function(t,e,n){"use strict";var o=function(){function t(){var e=t.generate();this.toString=function(){return e}}return t.generate=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},t.prototype.toString=function(){return""},t.prototype.length=function(){return this.toString().length},t}();n.GUID=o},{}],34:[function(t,e,n){"use strict";var o=function(){function t(t,e){this.x=t,this.y=e}return t}();n.Point=o},{}],35:[function(t,e,n){"use strict";var o=function(){function t(){}return t.start="start",t.end="end",t.left="left",t.center="center",t.right="right",t}();n.TextAlign=o},{}]},{},[5]);